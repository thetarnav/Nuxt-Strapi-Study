(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{420:function(t,e,r){var content=r(423);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(24).default)("7e4c26da",content,!0,{sourceMap:!1})},422:function(t,e,r){"use strict";r(420)},423:function(t,e,r){var d=r(23)((function(i){return i[1]}));d.push([t.i,'@keyframes shimmer-data-v-d32bdd0e{to{transform:translateX(100%)}}.product-thumbnail[data-v-d32bdd0e]{aspect-ratio:1/1;padding-bottom:100%;background-size:cover;background-position:50%;position:relative;overflow:hidden;border:none;filter:blur(.3px);animation:unset}.product-thumbnail[data-v-d32bdd0e]:before{background-color:#e2dfdd}.product-thumbnail[data-v-d32bdd0e]:after,.product-thumbnail[data-v-d32bdd0e]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%}.product-thumbnail[data-v-d32bdd0e]:after{background:linear-gradient(90deg,rgba(255,253,250,0),rgba(255,253,250,.2) 20%,rgba(255,253,250,.5) 50%,rgba(255,253,250,.2) 80%,rgba(255,253,250,0));transform:translateX(-100%);animation:shimmer-data-v-d32bdd0e 3s infinite}.product-thumbnail[data-v-d32bdd0e]:after,.product-thumbnail[data-v-d32bdd0e]:before{transition:opacity .6s}.product-thumbnail.isLoaded[data-v-d32bdd0e]:after,.product-thumbnail.isLoaded[data-v-d32bdd0e]:before{opacity:0}.product-title[data-v-d32bdd0e]{overflow:hidden;white-space:normal;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.skeleton-product .product-title[data-v-d32bdd0e]{width:80%;height:10px;border-radius:20px;position:relative;overflow:hidden;border:none;filter:blur(.3px);background-color:#e2dfdd}.skeleton-product .product-title[data-v-d32bdd0e]:after{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(90deg,rgba(255,253,250,0),rgba(255,253,250,.2) 20%,rgba(255,253,250,.5) 50%,rgba(255,253,250,.2) 80%,rgba(255,253,250,0));transform:translateX(-100%);animation:shimmer-data-v-d32bdd0e 3s infinite}.skeleton-product .product-title[data-v-d32bdd0e]:last-of-type{width:40%}.badge[data-v-d32bdd0e]{border-radius:.25rem;height:1.5rem;text-align:center;--tw-text-opacity:1;color:rgba(255,255,255,var(--tw-text-opacity));min-width:1.5rem}.dark[data-v-d32bdd0e]{--tw-bg-opacity:1;background-color:rgba(64,64,64,var(--tw-bg-opacity))}.dark .product-title[data-v-d32bdd0e]{--tw-text-opacity:1;color:rgba(245,245,245,var(--tw-text-opacity))}',""]),t.exports=d},424:function(t,e,r){"use strict";r.r(e);r(48),r(143);var d=r(1),n=r(415),o=r.n(n),l=d.default.extend({name:"ProductThumbnail",props:{data:{type:Object,default:null},listIndex:{type:Number,required:!0},showSkeleton:{type:Boolean,required:!0}},computed:{product:function(){var t,e,r,d,data=this.data,n={title:"",id:"",thumbnail:"",isAvailable:!1,isNew:!1,isPopular:!1};if(data){var title=data.title,o=data.id,l=data.thumbnail,c=data.isAvailable,h=data.timestamp,f=data.views;n.title=title,n.id=o,n.thumbnail=null!==(d=null!==(r=null===(e=null===(t=l.formats)||void 0===t?void 0:t.medium)||void 0===e?void 0:e.url)&&void 0!==r?r:null==l?void 0:l.url)&&void 0!==d?d:"",n.isAvailable=null!=c&&c,n.isNew=Math.min(this.$lastVisit,Date.now()-6048e5)<h,n.isPopular=f>100}return n}},methods:{openProduct:function(){var t=this.product.id,e=o.a.stringify(this.$route.query);this.$router.push(this.localePath("/gallery/".concat(t,"?").concat(e)))}}}),c=(r(422),r(14)),component=Object(c.a)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("figure",{staticClass:"product-wrapper bg-gray-100 rounded-xl"},[r("transition",{attrs:{name:"fade",mode:"out-in"}},[t.showSkeleton?r("div",{key:"skeleton"+t.listIndex,staticClass:"product skeleton-product"},[r("div",{staticClass:"product-thumbnail rounded-xl"}),t._v(" "),r("p",{staticClass:"product-title mx-4 my-2 mt-4"}),t._v(" "),r("p",{staticClass:"product-title mx-4 my-2 mb-4"})]):r("a",{key:"product"+t.listIndex,staticClass:"product text-gray-900",on:{click:function(e){return t.openProduct()}}},[r("div",{staticClass:"thumbnail-wrapper relative"},[r("div",{directives:[{name:"lazy-background",rawName:"v-lazy-background"}],staticClass:"product-thumbnail rounded-xl",attrs:{"lazy-background":t.product.thumbnail}}),t._v(" "),r("div",{staticClass:"absolute top-2 right-0 -mr-2 flex flex-col space-y-2"},[t.product.isAvailable?r("div",{staticClass:"badge bg-primary"},[t._v("\n\t\t\t\t\t\ta\n\t\t\t\t\t")]):t._e(),t._v(" "),t.product.isNew?r("div",{staticClass:"badge bg-secondary"},[t._v("n")]):t._e(),t._v(" "),t.product.isPopular?r("div",{staticClass:"badge bg-gray-800"},[t._v("\n\t\t\t\t\t\tp\n\t\t\t\t\t")]):t._e()])]),t._v(" "),r("caption",{staticClass:"product-title text-left px-4 py-2"},[t._v("\n\t\t\t\t"+t._s(t.product.title)+"\n\t\t\t")])])])],1)}),[],!1,null,"d32bdd0e",null);e.default=component.exports},441:function(t,e,r){"use strict";r.r(e);r(58),r(232),r(59),r(60),r(39);var d=r(6),n=r(46),o=r.n(n),l=r(428),c=r.n(l),h=r(1),f=r(145),v=0,m=h.default.extend({name:"GalleryGrid",props:{uid:{type:String,required:!0},id:{type:String,required:!0}},data:function(){return{products:[],hideResults:!1,debouncedFetch:function(){},debouncedScroll:function(){},reachedEnd:!1,paginationStart:0}},watch:{uid:function(){this.hideResults=!0,this.debouncedFetch()}},mounted:function(){this.hideResults=!1,this.debouncedFetch=o()(this.filterChange,800),this.debouncedScroll=o()(this.scroll,100,{maxWait:300}),this.debouncedFetch()},methods:{scroll:function(){this.reachedEnd||0===this.products.filter((function(t){return t.isLoaded})).length||this.hideResults||(document.scrollingElement||this.$el).scrollHeight-window.scrollY-window.innerHeight<=100&&this.fetchProducts()},filterChange:function(){this.reachedEnd=!1,this.paginationStart=0,this.fetchProducts(!0)},fetchProducts:function(){var t=arguments,e=this;return Object(d.a)(regeneratorRuntime.mark((function r(){var d,n,o,l,h,m,w,x,k,y,_,C,i,P,S,data,E;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:for(n=t.length>0&&void 0!==t[0]&&t[0],m=e.id,w=e.uid,x=e.paginationStart,y={start:x,limit:k=8},e.paginationStart+=k,n&&(e.products=[]),C=[],i=x;i<x+k;i++)C.push({isLoaded:!1});if((d=e.products).push.apply(d,C),""!==w){r.next=11;break}_=f.a,r.next=31;break;case 11:if("available"!==w){r.next=15;break}_=f.b,r.next=31;break;case 15:if("new"!==w){r.next=21;break}_=f.f,P=Date.now()-6048e5,S=e.$lastVisit,y.timestamp=Math.min(S,P),r.next=31;break;case 21:if("other"!==w){r.next=25;break}_=f.g,r.next=31;break;case 25:if(!m){r.next=30;break}_=f.i,y.id=m,r.next=31;break;case 30:return r.abrupt("return");case 31:return r.prev=31,r.next=34,e.$graphql.request(_,y);case 34:data=r.sent,(E=null!==(h=null!==(l=null===(o=data.category)||void 0===o?void 0:o.products)&&void 0!==l?l:null==data?void 0:data.products)&&void 0!==h?h:[]).forEach((function(t,e){C[e].data=t,C[e].isLoaded=!0})),E.length<k&&(e.reachedEnd=!0,c()(e.products,(function(t){return!t.isLoaded}))),r.next=46;break;case 40:r.prev=40,r.t0=r.catch(31),e.paginationStart-=k,e.products.splice(e.products.length-k,8),++v<4?setTimeout(e.fetchProducts,500):window.addEventListener("online",(function(){return e.fetchProducts()}));case 46:e.hideResults=!1;case 47:case"end":return r.stop()}}),r,null,[[31,40]])})))()}}}),w=r(14),component=Object(w.a)(m,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("span",[r("transition-group",{staticClass:"gallery-grid overflow-hidden p-6 grid grid-cols-2 gap-4 items-start",class:{"hide-results":t.hideResults},attrs:{appear:"",name:"fade",tag:"main"}},t._l(t.products,(function(e,d){return r("ProductThumbnail",{key:""+d,attrs:{data:e.data,"list-index":d,"show-skeleton":!e.isLoaded||t.hideResults}})})),1),t._v(" "),r("GlobalEvents",{on:{scroll:t.debouncedScroll}})],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{ProductThumbnail:r(424).default})}}]);