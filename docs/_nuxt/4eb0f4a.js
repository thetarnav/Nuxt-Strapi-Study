(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{317:function(t,e,r){var content=r(324);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(23).default)("0e670d9d",content,!0,{sourceMap:!1})},319:function(t,e,r){var content=r(326);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(23).default)("6a9079d8",content,!0,{sourceMap:!1})},322:function(t,e,r){"use strict";var n=r(2),l=r(49).find,o=r(140),c=r(24),d=!0,f=c("find");"find"in[]&&Array(1).find((function(){d=!1})),n({target:"Array",proto:!0,forced:d||!f},{find:function(t){return l(this,t,arguments.length>1?arguments[1]:void 0)}}),o("find")},323:function(t,e,r){"use strict";r(317)},324:function(t,e,r){(e=r(22)(!1)).push([t.i,'@-webkit-keyframes shimmer-data-v-0b27ac81{to{transform:translateX(100%)}}@keyframes shimmer-data-v-0b27ac81{to{transform:translateX(100%)}}.gallery[data-v-0b27ac81]{padding-top:10px;min-height:100vh}.gallery-title[data-v-0b27ac81]{margin-right:10px}.gallery-header[data-v-0b27ac81]{display:flex;position:relative;margin-left:var(--page-margin)}.hide-me[data-v-0b27ac81]{transition:opacity .3s .1s,transform .3s .1s}.hide-me.hidden[data-v-0b27ac81]{transition:opacity .2s,transform .2s;opacity:0;transform:translateY(-20px)}.side-filters-group[data-v-0b27ac81]{position:relative;display:flex;flex-wrap:wrap}.side-filters-group>*[data-v-0b27ac81]{margin:6px}.side-filters-group .show-more[data-v-0b27ac81]{position:absolute;z-index:10;top:46px;right:var(--page-margin)}.side-filters-group .show-more[data-v-0b27ac81]:before{content:"";position:absolute;z-index:-1;top:-2px;bottom:-2px;right:calc(var(--page-margin)*-1 - 2px);width:40vw;background:linear-gradient(90deg,transparent,#fffdfa,#fffdfa)}.side-filters-group .raise-me[data-v-0b27ac81]{position:relative;z-index:20}.loading-pill[data-v-0b27ac81]{width:20vw;height:35px;background:grey}.full-filters-group[data-v-0b27ac81]{position:fixed;z-index:40;top:0;left:0;right:0;display:flex;flex-wrap:wrap;padding:20px;background:#f1eeeb}.full-filters-group>*[data-v-0b27ac81]{margin:6px}.full-filters-group .close-button[data-v-0b27ac81]{border-radius:50%;width:50px;height:50px;display:flex;padding:0;margin:0;position:absolute;top:calc(100% - 25px);right:var(--page-margin)}.full-filters-group .close-button>*[data-v-0b27ac81]{margin:auto}.full-filters-group .close-button .icon[data-v-0b27ac81]{height:24px;width:24px}.line-filters-group[data-v-0b27ac81]{position:fixed;z-index:30;top:0;left:0;min-width:100vw;display:flex;background:#f1eeeb;padding:10px}.line-filters-group>*[data-v-0b27ac81]{margin:6px}.line-filters-group .show-more[data-v-0b27ac81]{position:absolute;z-index:40;top:10px;left:calc(100vw - var(--page-margin));transform:translateX(-100%)}.line-filters-group .show-more[data-v-0b27ac81]:before{content:"";position:absolute;z-index:-1;top:-2px;bottom:-2px;right:calc(var(--page-margin)*-1 - 2px);width:30vw;background:linear-gradient(90deg,transparent,#f1eeeb,#f1eeeb,#f1eeeb)}.line-filters-leave-active[data-v-0b27ac81]{transition:opacity .2s .1s,transform .3s}.line-filters-enter-active[data-v-0b27ac81]{transition:opacity .2s,transform .3s}.line-filters-enter[data-v-0b27ac81],.line-filters-leave-to[data-v-0b27ac81]{opacity:0;transform:translateY(-100%)}',""]),t.exports=e},325:function(t,e,r){"use strict";r(319)},326:function(t,e,r){(e=r(22)(!1)).push([t.i,'@-webkit-keyframes shimmer-data-v-b7cad13a{to{transform:translateX(100%)}}@keyframes shimmer-data-v-b7cad13a{to{transform:translateX(100%)}}.gallery-grid[data-v-b7cad13a]{display:grid;grid-template-columns:repeat(auto-fill,minmax(130px,1fr));grid-gap:20px;padding:20px}.product-wrapper[data-v-b7cad13a]{overflow:hidden;border-radius:20px;background-color:#f1eeeb}.product[data-v-b7cad13a]{padding:0}.product-thumbnail[data-v-b7cad13a]{border-radius:20px;aspect-ratio:1/1;padding-bottom:100%;background-size:cover;background-position:50%;position:relative;overflow:hidden;border:none;filter:blur(.3px);-webkit-animation:unset;animation:unset}.product-thumbnail[data-v-b7cad13a]:before{background-color:#e2dfdd}.product-thumbnail[data-v-b7cad13a]:after,.product-thumbnail[data-v-b7cad13a]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%}.product-thumbnail[data-v-b7cad13a]:after{background:linear-gradient(90deg,rgba(255,253,250,0),rgba(255,253,250,.2) 20%,rgba(255,253,250,.5) 50%,rgba(255,253,250,.2) 80%,rgba(255,253,250,0));transform:translateX(-100%);-webkit-animation:shimmer-data-v-b7cad13a 3s infinite;animation:shimmer-data-v-b7cad13a 3s infinite}.product-thumbnail[data-v-b7cad13a]:after,.product-thumbnail[data-v-b7cad13a]:before{transition:opacity .6s}.product-thumbnail.isLoaded[data-v-b7cad13a]:after,.product-thumbnail.isLoaded[data-v-b7cad13a]:before{opacity:0}.product-title[data-v-b7cad13a]{margin:10px 16px}.skeleton .product-title[data-v-b7cad13a]{width:80%;height:10px;border-radius:20px;position:relative;overflow:hidden;border:none;filter:blur(.3px);background-color:#e2dfdd}.skeleton .product-title[data-v-b7cad13a]:after{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(90deg,rgba(255,253,250,0),rgba(255,253,250,.2) 20%,rgba(255,253,250,.5) 50%,rgba(255,253,250,.2) 80%,rgba(255,253,250,0));transform:translateX(-100%);-webkit-animation:shimmer-data-v-b7cad13a 3s infinite;animation:shimmer-data-v-b7cad13a 3s infinite}.skeleton .product-title[data-v-b7cad13a]:first-of-type{margin-top:16px}.skeleton .product-title[data-v-b7cad13a]:last-of-type{width:40%;margin-bottom:16px}',""]),t.exports=e},331:function(t,e,r){"use strict";r.r(e);var n=r(0).default.extend({name:"FilterPill",props:{icon:{type:String,default:""},tag:{type:String,required:!0},selected:{type:String,default:null},color:{type:String,default:""}},computed:{isSelected:function(){return""!==this.selected&&this.selected===this.tag}},methods:{handleClick:function(){var t={tag:this.tag,selected:!this.isSelected};this.$emit("select",t)}}}),l=r(10),component=Object(l.a)(n,(function(){var t,e=this,r=e.$createElement,n=e._self._c||r;return n("transition",{attrs:{appear:"",name:"fade"}},[n("button",{staticClass:"pill",class:(t={},t[e.color]=!0,t.selected=e.isSelected,t),on:{click:e.handleClick}},[e.icon?n("Icon",{staticClass:"icon",attrs:{icon:e.icon}}):e._e(),e._v(" "),n("p",{staticClass:"text"},[e._t("default")],2)],1)])}),[],!1,null,null,null);e.default=component.exports},332:function(t,e,r){"use strict";r.r(e);r(59),r(47),r(207),r(48),r(43),r(41);var n=r(6),l=r(30),o=r.n(l),c=r(318),d=r.n(c),f=r(313),h=r.n(f),v=r(0),m=r(139),w=0,x=v.default.extend({name:"GalleryGrid",props:{uid:{type:String,required:!0},id:{type:String,required:!0}},data:function(){return{products:[],hideResults:!1,debouncedFetch:function(){},debouncedScroll:function(){},reachedEnd:!1,paginationStart:0}},watch:{uid:function(){this.hideResults=!0,this.debouncedFetch()}},mounted:function(){this.hideResults=!1,this.debouncedFetch=o()(this.filterChange,800),this.debouncedScroll=o()(this.scroll,100,{maxWait:300}),this.debouncedFetch()},methods:{scroll:function(){this.reachedEnd||0===this.products.length||(document.scrollingElement||this.$el).scrollHeight-window.scrollY-window.innerHeight<=100&&this.fetchProducts()},getData:function(t){var e,r,n,l,o={title:"",id:"",thumbnail:""};if(null==t?void 0:t.data){var c=t.data,title=c.title,d=c.id,f=c.thumbnail;o.title=title,o.id=d,o.thumbnail=null!==(l=null!==(n=null===(r=null===(e=f.formats)||void 0===e?void 0:e.large)||void 0===r?void 0:r.url)&&void 0!==n?n:null==f?void 0:f.url)&&void 0!==l?l:""}return o},filterChange:function(){this.reachedEnd=!1,this.paginationStart=0,this.fetchProducts(!0)},fetchProducts:function(){var t=arguments,e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,l,o,c,f,h,v,x,y,k,F,_,i,C,O,data,S;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:for(l=t.length>0&&void 0!==t[0]&&t[0],h=e.id,v=e.uid,x=e.paginationStart,k={start:x,limit:y=8},e.paginationStart+=y,l&&(e.products=[]),_=[],i=x;i<x+y;i++)_.push({isLoaded:!1});if((n=e.products).push.apply(n,_),""!==v){r.next=11;break}F=m.a,r.next=31;break;case 11:if("available"!==v){r.next=15;break}F=m.b,r.next=31;break;case 15:if("new"!==v){r.next=21;break}F=m.f,C=Date.now()-6048e5,O=e.$lastVisit,k.timestamp=Math.min(O,C),r.next=31;break;case 21:if("other"!==v){r.next=25;break}F=m.g,r.next=31;break;case 25:if(!h){r.next=30;break}F=m.h,k.id=h,r.next=31;break;case 30:return r.abrupt("return");case 31:return r.prev=31,r.next=34,e.$graphql.request(F,k);case 34:data=r.sent,(S=null!==(f=null!==(c=null===(o=data.category)||void 0===o?void 0:o.products)&&void 0!==c?c:null==data?void 0:data.products)&&void 0!==f?f:[]).forEach((function(t,e){_[e].data=t,_[e].isLoaded=!0})),S.length<y&&(e.reachedEnd=!0,d()(e.products,(function(t){return!t.isLoaded}))),r.next=46;break;case 40:r.prev=40,r.t0=r.catch(31),e.paginationStart-=y,e.products.splice(e.products.length-y,8),++w<4?setTimeout(e.fetchProducts,500):window.addEventListener("online",(function(){return e.fetchProducts()}));case 46:e.hideResults=!1;case 47:case"end":return r.stop()}}),r,null,[[31,40]])})))()},openProduct:function(t){var e=h.a.stringify(this.$route.query);this.$router.push("/gallery/".concat(t,"?").concat(e))}}}),y=(r(325),r(10)),component=Object(y.a)(x,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("span",[r("transition-group",{staticClass:"gallery-grid",class:{"hide-results":t.hideResults},attrs:{appear:"",name:"fade",tag:"main"}},t._l(t.products,(function(e,n){return r("figure",{key:""+n,staticClass:"product-wrapper"},[r("transition",{attrs:{name:"fade",mode:"out-in"}},[e.isLoaded&&!t.hideResults?r("a",{key:"product"+n,staticClass:"product",on:{click:function(r){t.openProduct(t.getData(e).id)}}},[r("div",{directives:[{name:"lazy-background",rawName:"v-lazy-background"}],staticClass:"product-thumbnail",attrs:{"lazy-background":t.getData(e).thumbnail}}),t._v(" "),r("p",{staticClass:"product-title"},[t._v("\n\t\t\t\t\t\t"+t._s(t.getData(e).title)+"\n\t\t\t\t\t")])]):r("div",{key:"skeleton"+n,staticClass:"product skeleton"},[r("div",{staticClass:"product-thumbnail"}),t._v(" "),r("p",{staticClass:"product-title"}),t._v(" "),r("p",{staticClass:"product-title"})])])],1)})),0),t._v(" "),r("GlobalEvents",{on:{scroll:t.debouncedScroll}})],1)}),[],!1,null,"b7cad13a",null);e.default=component.exports},335:function(t,e,r){"use strict";r.r(e);r(94),r(322),r(47),r(38),r(42),r(39),r(11),r(74),r(48);var n=r(32),l=r(57),o=(r(41),r(6)),c=r(0),d=r(30),f=r.n(d),h=r(181),v=r.n(h),m=r(139),w=r(29);function x(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function y(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?x(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):x(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var k=c.default.extend({name:"Gallery",layout:"galleryLayout",scrollToTop:!1,data:function(){return{filters:[],filtersIndexes:{},showFullFilters:!1,showLineFilters:!1,selectedFilter:"",debounceScroll:function(){}}},fetch:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.$store.state.filters.length){e.next=7;break}return e.next=3,t.generateFilters();case 3:r=e.sent,t.$store.commit("setFilters",r),e.next=8;break;case 7:r=v()(t.$store.state.filters);case 8:t.filters=r,t.createFilterIndexes(),t.selectFilterFromQuery();case 11:case"end":return e.stop()}}),e)})))()},head:function(){return{title:"Renkidzieło - Galeria"}},computed:{showOverlay:function(){var t=this.$route,e=t.params,r=t.query;return void 0!==e.productId||void 0!==r.productId},availableFilters:function(){var t=this.$store.state,e=t.areAvailableProducts,r=t.areNewProducts,n=t.areOtherProducts,l=[];return!r&&l.push("new"),!e&&l.push("available"),!n&&l.push("other"),this.filters.filter((function(t){var e=t.uid;return!l.includes(e)}))},onSideFilters:function(){return this.availableFilters.filter((function(t,e){var r=t.uid;return e<4||["available","new"].includes(r)}))},selectedFilterID:function(){var t,e,r=this;return null!==(e=null===(t=this.filters.find((function(t){return t.uid===r.selectedFilter})))||void 0===t?void 0:t.id)&&void 0!==e?e:""}},mounted:function(){var t=this;this.debounceScroll=f()(this.handleScroll,180,{maxWait:250}),this.$nextTick((function(){window.scrollTo({top:t.$store.state.swipeVerticalPadding})})),localStorage.setItem("lastVisit",Date.now().toString())},methods:{generateFilters:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var r,data,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],e.prev=1,e.next=4,t.$graphql.request(m.c);case 4:data=e.sent,n=data.categories,r.push.apply(r,Object(l.a)(n.map((function(t){var e,r,n=t.id,l=t.uid,o=t.name,c=null!==(r=null===(e=w.d.find((function(t){return t.name===l})))||void 0===e?void 0:e.icon)&&void 0!==r?r:null;return new w.a(o,l,n,c)})))),e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[]);case 13:return r.push.apply(r,[new w.a("Inne","other"),new w.a("Dostępne","available",null,"shopping-bag","primary",!0),new w.a("Nowe","new",null,null,"secondary",!0)]),e.abrupt("return",r);case 15:case"end":return e.stop()}}),e,null,[[1,9]])})))()},createFilterIndexes:function(){var t={};this.filters.forEach((function(filter,e){return t[filter.uid]=e})),this.filtersIndexes=t},selectFilterFromQuery:function(){var t=this.$route.query.filter;t&&"string"==typeof t&&(this.selectedFilter=t)},handleScroll:function(){this.showLineFilters=window.scrollY>this.$store.state.swipeVerticalPadding+90},toggleFullFilters:function(){this.showFullFilters=!this.showFullFilters},selectFilter:function(t){var e=t.tag,r=t.selected;this.selectedFilter=r?e:"",this.$router.push({query:y(y({},this.$route.query),{},{filter:r?e:void 0})})}}}),F=(r(323),r(10)),component=Object(F.a)(k,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"page gallery"},[r("header",{staticClass:"gallery-header hide-me",class:{hidden:t.showFullFilters||t.showLineFilters}},[r("h2",{staticClass:"gallery-title"},[t._v("Galeria")]),t._v(" "),r("div",{staticClass:"side-filters-group"},[t._l(t.onSideFilters,(function(filter,e){return r("FilterPill",{key:filter.uid,class:{"raise-me":e<3},attrs:{tag:filter.uid,icon:filter.icon,selected:t.selectedFilter,color:filter.color},on:{select:t.selectFilter}},[t._v(t._s(filter.name))])})),t._v(" "),0===t.filters.length?[r("div",{staticClass:"pill pill--loading"}),t._v(" "),r("div",{staticClass:"pill pill--loading"}),t._v(" "),r("div",{staticClass:"pill pill--loading"}),t._v(" "),r("div",{staticClass:"pill pill--loading"})]:t._e(),t._v(" "),t.filters.length>6?r("div",{staticClass:"show-more",on:{click:t.toggleFullFilters}},[r("div",{staticClass:"filter-pill"},[r("Icon",{staticClass:"icon alone",attrs:{icon:"ellipsis-h"}})],1)]):t._e()],2)]),t._v(" "),r("transition",{attrs:{name:"blur-top",duration:"300"}},[t.showFullFilters?r("div",{staticClass:"full-filters-group"},[t._l(t.availableFilters,(function(filter){return r("FilterPill",{key:filter.uid,attrs:{tag:filter.uid,icon:filter.icon,selected:t.selectedFilter,color:filter.color},on:{select:t.selectFilter}},[t._v(t._s(filter.name))])})),t._v(" "),r("button",{staticClass:"close-button btn-dark",on:{click:t.toggleFullFilters}},[r("Icon",{staticClass:"icon",attrs:{icon:"times"}})],1)],2):t._e()]),t._v(" "),r("transition",{attrs:{name:"line-filters"}},[t.showLineFilters?r("div",{staticClass:"line-filters-group hide-me",class:{hidden:t.showFullFilters}},[t._l(t.availableFilters,(function(filter){return r("FilterPill",{key:filter.uid,attrs:{tag:filter.uid,selected:t.selectedFilter,color:filter.color},on:{select:t.selectFilter}},[t._v(t._s(filter.name))])})),t._v(" "),t.filters.length>6?r("div",{staticClass:"show-more",on:{click:t.toggleFullFilters}},[r("div",{staticClass:"filter-pill"},[r("Icon",{staticClass:"icon alone",attrs:{icon:"ellipsis-h"}})],1)]):t._e()],2):t._e()]),t._v(" "),r("GlobalEvents",{on:{scroll:t.debounceScroll}}),t._v(" "),r("Grid",{attrs:{id:t.selectedFilterID,uid:t.selectedFilter}}),t._v(" "),t.showOverlay?r("nuxt-child"):t._e()],1)}),[],!1,null,"0b27ac81",null);e.default=component.exports;installComponents(component,{FilterPill:r(331).default,Grid:r(332).default})}}]);