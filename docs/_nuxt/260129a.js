(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{382:function(t,e,r){var content=r(392);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(20).default)("2981079c",content,!0,{sourceMap:!1})},384:function(t,e,r){var content=r(394);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(20).default)("06e75a22",content,!0,{sourceMap:!1})},391:function(t,e,r){"use strict";r(382)},392:function(t,e,r){(e=r(19)(!1)).push([t.i,'@-webkit-keyframes shimmer-data-v-aa5611e8{to{transform:translateX(100%)}}@keyframes shimmer-data-v-aa5611e8{to{transform:translateX(100%)}}.gallery-header[data-v-aa5611e8]{display:flex;position:relative;margin-left:var(--page-margin)}.hide-me[data-v-aa5611e8]{transition:opacity .3s .1s,transform .3s .1s}.hide-me.hidden[data-v-aa5611e8]{transition:opacity .2s,transform .2s;opacity:0;transform:translateY(-20px)}.side-filters-group[data-v-aa5611e8]{position:relative}.side-filters-group .show-more[data-v-aa5611e8]{position:absolute;z-index:10;top:46px;right:var(--page-margin)}.side-filters-group .show-more[data-v-aa5611e8]:before{content:"";position:absolute;z-index:-1;top:-2px;bottom:-2px;right:calc(var(--page-margin)*-1 - 2px);width:40vw;background:linear-gradient(90deg,transparent,#fffdfa,#fffdfa)}.side-filters-group .raise-me[data-v-aa5611e8]{position:relative;z-index:20}.loading-pill[data-v-aa5611e8]{width:20vw;height:35px;background:grey}.full-filters-group[data-v-aa5611e8]{position:fixed;z-index:40;top:0;left:0;right:0;display:flex;flex-wrap:wrap;padding:20px;background:#f1eeeb}.full-filters-group>*[data-v-aa5611e8]{margin:6px}.full-filters-group .close-button[data-v-aa5611e8]{border-radius:50%;width:50px;height:50px;display:flex;padding:0;margin:0;position:absolute;top:calc(100% - 25px);right:var(--page-margin)}.full-filters-group .close-button>*[data-v-aa5611e8]{margin:auto}.full-filters-group .close-button .icon[data-v-aa5611e8]{height:24px;width:24px}.line-filters-group[data-v-aa5611e8]{position:fixed;z-index:30;top:0;left:0;-ms-overflow-style:none;scrollbar-width:none}.line-filters-group[data-v-aa5611e8]::-webkit-scrollbar{display:none}.line-filters-group .show-more[data-v-aa5611e8]{position:absolute;z-index:40;top:10px;left:calc(100vw - var(--page-margin));transform:translateX(-100%)}.line-filters-group .show-more[data-v-aa5611e8]:before{content:"";position:absolute;z-index:-1;top:-2px;bottom:-2px;right:calc(var(--page-margin)*-1 - 2px);width:30vw;background:linear-gradient(90deg,transparent,#f1eeeb,#f1eeeb,#f1eeeb)}.line-filters-leave-active[data-v-aa5611e8]{transition:opacity .2s .1s,transform .3s}.line-filters-enter-active[data-v-aa5611e8]{transition:opacity .2s,transform .3s}.line-filters-enter[data-v-aa5611e8],.line-filters-leave-to[data-v-aa5611e8]{opacity:0;transform:translateY(-100%)}',""]),t.exports=e},393:function(t,e,r){"use strict";r(384)},394:function(t,e,r){(e=r(19)(!1)).push([t.i,'@-webkit-keyframes shimmer-data-v-1fcedada{to{transform:translateX(100%)}}@keyframes shimmer-data-v-1fcedada{to{transform:translateX(100%)}}.product-thumbnail[data-v-1fcedada]{aspect-ratio:1/1;padding-bottom:100%;background-size:cover;background-position:50%;position:relative;overflow:hidden;border:none;filter:blur(.3px);-webkit-animation:unset;animation:unset}.product-thumbnail[data-v-1fcedada]:before{background-color:#e2dfdd}.product-thumbnail[data-v-1fcedada]:after,.product-thumbnail[data-v-1fcedada]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%}.product-thumbnail[data-v-1fcedada]:after{background:linear-gradient(90deg,rgba(255,253,250,0),rgba(255,253,250,.2) 20%,rgba(255,253,250,.5) 50%,rgba(255,253,250,.2) 80%,rgba(255,253,250,0));transform:translateX(-100%);-webkit-animation:shimmer-data-v-1fcedada 3s infinite;animation:shimmer-data-v-1fcedada 3s infinite}.product-thumbnail[data-v-1fcedada]:after,.product-thumbnail[data-v-1fcedada]:before{transition:opacity .6s}.product-thumbnail.isLoaded[data-v-1fcedada]:after,.product-thumbnail.isLoaded[data-v-1fcedada]:before{opacity:0}.product-title[data-v-1fcedada]{overflow:hidden;white-space:normal;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.skeleton .product-title[data-v-1fcedada]{width:80%;height:10px;border-radius:20px;position:relative;overflow:hidden;border:none;filter:blur(.3px);background-color:#e2dfdd}.skeleton .product-title[data-v-1fcedada]:after{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(90deg,rgba(255,253,250,0),rgba(255,253,250,.2) 20%,rgba(255,253,250,.5) 50%,rgba(255,253,250,.2) 80%,rgba(255,253,250,0));transform:translateX(-100%);-webkit-animation:shimmer-data-v-1fcedada 3s infinite;animation:shimmer-data-v-1fcedada 3s infinite}.skeleton .product-title[data-v-1fcedada]:last-of-type{width:40%}.badge[data-v-1fcedada]{border-radius:.25rem;height:1.5rem;text-align:center;--tw-text-opacity:1;color:rgba(255,255,255,var(--tw-text-opacity));min-width:1.5rem}',""]),t.exports=e},409:function(t,e,r){"use strict";r.r(e);var n=r(1).a.extend({name:"FilterPill",props:{icon:{type:String,default:""},tag:{type:String,required:!0},selected:{type:String,default:null},color:{type:String,default:""}},computed:{isSelected:function(){return""!==this.selected&&this.selected===this.tag}},methods:{handleClick:function(){var t={tag:this.tag,selected:!this.isSelected};this.$emit("select",t)}}}),l=r(11),component=Object(l.a)(n,(function(){var t,e=this,r=e.$createElement,n=e._self._c||r;return n("transition",{attrs:{appear:"",name:"fade"}},[n("button",{staticClass:"pill",class:(t={},t[e.color]=!0,t.selected=e.isSelected,t),on:{click:e.handleClick}},[e.icon?n("Icon",{staticClass:"icon",attrs:{icon:e.icon}}):e._e(),e._v(" "),n("span",{staticClass:"text whitespace-nowrap"},[e._t("default")],2)],1)])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Button:r(143).default})},410:function(t,e,r){"use strict";r.r(e);r(53),r(225),r(54),r(57),r(32);var n=r(3),l=r(41),o=r.n(l),d=r(383),c=r.n(d),f=r(1),h=r(145),v=0,m=f.a.extend({name:"GalleryGrid",props:{uid:{type:String,required:!0},id:{type:String,required:!0}},data:function(){return{products:[],hideResults:!1,debouncedFetch:function(){},debouncedScroll:function(){},reachedEnd:!1,paginationStart:0}},watch:{uid:function(){this.hideResults=!0,this.debouncedFetch()}},mounted:function(){this.hideResults=!1,this.debouncedFetch=o()(this.filterChange,800),this.debouncedScroll=o()(this.scroll,100,{maxWait:300}),this.debouncedFetch()},methods:{scroll:function(){this.reachedEnd||0===this.products.length||(document.scrollingElement||this.$el).scrollHeight-window.scrollY-window.innerHeight<=100&&this.fetchProducts()},filterChange:function(){this.reachedEnd=!1,this.paginationStart=0,this.fetchProducts(!0)},fetchProducts:function(){var t=arguments,e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,l,o,d,f,m,w,x,y,k,F,_,i,C,P,data,O;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:for(l=t.length>0&&void 0!==t[0]&&t[0],m=e.id,w=e.uid,x=e.paginationStart,k={start:x,limit:y=8},e.paginationStart+=y,l&&(e.products=[]),_=[],i=x;i<x+y;i++)_.push({isLoaded:!1});if((n=e.products).push.apply(n,_),""!==w){r.next=11;break}F=h.a,r.next=31;break;case 11:if("available"!==w){r.next=15;break}F=h.b,r.next=31;break;case 15:if("new"!==w){r.next=21;break}F=h.f,C=Date.now()-6048e5,P=e.$lastVisit,k.timestamp=Math.min(P,C),r.next=31;break;case 21:if("other"!==w){r.next=25;break}F=h.g,r.next=31;break;case 25:if(!m){r.next=30;break}F=h.i,k.id=m,r.next=31;break;case 30:return r.abrupt("return");case 31:return r.prev=31,r.next=34,e.$graphql.request(F,k);case 34:data=r.sent,(O=null!==(f=null!==(d=null===(o=data.category)||void 0===o?void 0:o.products)&&void 0!==d?d:null==data?void 0:data.products)&&void 0!==f?f:[]).forEach((function(t,e){_[e].data=t,_[e].isLoaded=!0})),O.length<y&&(e.reachedEnd=!0,c()(e.products,(function(t){return!t.isLoaded}))),r.next=46;break;case 40:r.prev=40,r.t0=r.catch(31),e.paginationStart-=y,e.products.splice(e.products.length-y,8),++v<4?setTimeout(e.fetchProducts,500):window.addEventListener("online",(function(){return e.fetchProducts()}));case 46:e.hideResults=!1;case 47:case"end":return r.stop()}}),r,null,[[31,40]])})))()}}}),w=r(11),component=Object(w.a)(m,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("span",[r("transition-group",{staticClass:"gallery-grid overflow-hidden p-6 grid grid-cols-2 gap-4 items-start",class:{"hide-results":t.hideResults},attrs:{appear:"",name:"fade",tag:"main"}},t._l(t.products,(function(e,n){return r("ProductThumbnail",{key:""+n,attrs:{data:e.data,"list-index":n,"show-skeleton":!e.isLoaded||t.hideResults}})})),1),t._v(" "),r("GlobalEvents",{on:{scroll:t.debouncedScroll}})],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{ProductThumbnail:r(412).default})},412:function(t,e,r){"use strict";r.r(e);r(43),r(149);var n=r(1),l=r(377),o=r.n(l),d=n.a.extend({name:"ProductThumbnail",props:{data:{type:Object,default:null},listIndex:{type:Number,required:!0},showSkeleton:{type:Boolean,required:!0}},computed:{product:function(){var t,e,r,n,data=this.data,l={title:"",id:"",thumbnail:"",isAvailable:!1,isNew:!1,isPopular:!1};if(data){var title=data.title,o=data.id,d=data.thumbnail,c=data.isAvailable,f=data.timestamp,h=data.views;l.title=title,l.id=o,l.thumbnail=null!==(n=null!==(r=null===(e=null===(t=d.formats)||void 0===t?void 0:t.large)||void 0===e?void 0:e.url)&&void 0!==r?r:null==d?void 0:d.url)&&void 0!==n?n:"",l.isAvailable=null!=c&&c,l.isNew=Math.min(this.$lastVisit,Date.now()-6048e5)<f,l.isPopular=h>100}return l}},methods:{openProduct:function(t){var e=o.a.stringify(this.$route.query);this.$router.push(this.localePath("/gallery/".concat(t,"?").concat(e)))}}}),c=(r(393),r(11)),component=Object(c.a)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("figure",{staticClass:"product-wrapper bg-gray-100 rounded-xl"},[r("transition",{attrs:{name:"fade",mode:"out-in"}},[t.showSkeleton?r("div",{key:"skeleton"+t.listIndex,staticClass:"product skeleton"},[r("div",{staticClass:"product-thumbnail rounded-xl"}),t._v(" "),r("p",{staticClass:"product-title mx-4 my-2 mt-4"}),t._v(" "),r("p",{staticClass:"product-title mx-4 my-2 mb-4"})]):r("a",{key:"product"+t.listIndex,staticClass:"product text-gray-900",on:{click:function(e){return t.openProduct(t.product.id)}}},[r("div",{staticClass:"thumbnail-wrapper relative"},[r("div",{directives:[{name:"lazy-background",rawName:"v-lazy-background"}],staticClass:"product-thumbnail rounded-xl",attrs:{"lazy-background":t.product.thumbnail}}),t._v(" "),r("div",{staticClass:"absolute top-2 right-0 -mr-2 flex flex-col space-y-2"},[t.product.isAvailable?r("div",{staticClass:"badge bg-primary"},[t._v("\n\t\t\t\t\t\ta\n\t\t\t\t\t")]):t._e(),t._v(" "),t.product.isNew?r("div",{staticClass:"badge bg-secondary"},[t._v("n")]):t._e(),t._v(" "),t.product.isPopular?r("div",{staticClass:"badge bg-gray-800"},[t._v("\n\t\t\t\t\t\tp\n\t\t\t\t\t")]):t._e()])]),t._v(" "),r("caption",{staticClass:"product-title text-left mx-4 my-2"},[t._v("\n\t\t\t\t"+t._s(t.product.title)+"\n\t\t\t")])])])],1)}),[],!1,null,"1fcedada",null);e.default=component.exports},418:function(t,e,r){"use strict";r.r(e);r(80),r(103),r(53),r(31),r(37),r(34),r(10),r(63),r(54);var n=r(17),l=r(47),o=(r(32),r(3)),d=r(1),c=r(41),f=r.n(c),h=r(188),v=r.n(h),m=r(145),w=r(33);function x(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function y(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?x(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):x(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var k=d.a.extend({name:"Gallery",layout:"galleryLayout",scrollToTop:!1,data:function(){return{filters:[],filtersIndexes:{},showFullFilters:!1,showLineFilters:!1,selectedFilter:"",debounceScroll:function(){}}},fetch:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.$store.state.filters.length){e.next=7;break}return e.next=3,t.generateFilters();case 3:r=e.sent,t.$store.commit("setFilters",r),e.next=8;break;case 7:r=v()(t.$store.state.filters);case 8:t.filters=r,t.createFilterIndexes(),t.selectFilterFromQuery();case 11:case"end":return e.stop()}}),e)})))()},head:function(){return{title:"Renkidzieło - Galeria"}},computed:{showOverlay:function(){var t=this.$route,e=t.params,r=t.query;return void 0!==e.productId||void 0!==r.productId},availableFilters:function(){var t=this.$store.state,e=t.areAvailableProducts,r=t.areNewProducts,n=t.areOtherProducts,l=[];return!r&&l.push("new"),!e&&l.push("available"),!n&&l.push("other"),this.filters.filter((function(t){var e=t.uid;return!l.includes(e)}))},onSideFilters:function(){return this.availableFilters.filter((function(t,e){var r=t.uid;return e<4||["available","new"].includes(r)}))},selectedFilterID:function(){var t,e,r=this;return null!==(e=null===(t=this.filters.find((function(t){return t.uid===r.selectedFilter})))||void 0===t?void 0:t.id)&&void 0!==e?e:""}},mounted:function(){var t=this;this.debounceScroll=f()(this.handleScroll,180,{maxWait:250}),this.$nextTick((function(){window.scrollTo({top:t.$store.state.swipeVerticalPadding})})),localStorage.setItem("lastVisit",Date.now().toString())},methods:{generateFilters:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var r,data,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],e.prev=1,e.next=4,t.$graphql.request(m.c);case 4:data=e.sent,n=data.categories,r.push.apply(r,Object(l.a)(n.map((function(t){var e,r,n=t.id,l=t.uid,o=t.name,d=null!==(r=null===(e=w.d.find((function(t){return t.name===l})))||void 0===e?void 0:e.icon)&&void 0!==r?r:null;return new w.a(o,l,n,d)})))),e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[]);case 13:return r.push.apply(r,[new w.a("Inne","other"),new w.a("Dostępne","available",null,"shopping-bag","primary",!0),new w.a("Nowe","new",null,null,"secondary",!0)]),e.abrupt("return",r);case 15:case"end":return e.stop()}}),e,null,[[1,9]])})))()},createFilterIndexes:function(){var t={};this.filters.forEach((function(filter,e){return t[filter.uid]=e})),this.filtersIndexes=t},selectFilterFromQuery:function(){var t=this.$route.query.filter;t&&"string"==typeof t&&(this.selectedFilter=t)},handleScroll:function(){this.showLineFilters=window.scrollY>this.$store.state.swipeVerticalPadding+90},toggleFullFilters:function(){this.showFullFilters=!this.showFullFilters},selectFilter:function(t){var e=t.tag,r=t.selected;this.selectedFilter=r?e:"",this.$router.push(this.localePath({query:y(y({},this.$route.query),{},{filter:r?e:void 0})}))}}}),F=(r(391),r(11)),component=Object(F.a)(k,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"page gallery"},[r("header",{staticClass:"gallery-header hide-me py-4 bg-gray-100",class:{hidden:t.showFullFilters||t.showLineFilters}},[r("h2",{staticClass:"ml-6 mr-4 mt-1"},[t._v("Galeria")]),t._v(" "),r("div",{staticClass:"side-filters-group flex flex-wrap"},[t._l(t.onSideFilters,(function(filter,e){return r("FilterPill",{key:filter.uid,staticClass:"m-1",class:{"raise-me":e<3},attrs:{tag:filter.uid,icon:filter.icon,selected:t.selectedFilter,color:filter.color},on:{select:t.selectFilter}},[t._v(t._s(t.$te("filter."+filter.uid)?t.$t("filter."+filter.uid):filter.name))])})),t._v(" "),0===t.filters.length?[r("div",{staticClass:"pill m-2 pill--loading"}),t._v(" "),r("div",{staticClass:"pill m-2 pill--loading"}),t._v(" "),r("div",{staticClass:"pill m-2 pill--loading"}),t._v(" "),r("div",{staticClass:"pill m-2 pill--loading"})]:t._e(),t._v(" "),t.filters.length>6?r("div",{staticClass:"show-more",on:{click:t.toggleFullFilters}},[r("div",{staticClass:"filter-pill"},[r("Icon",{staticClass:"icon alone",attrs:{icon:"ellipsis-h"}})],1)]):t._e()],2)]),t._v(" "),r("transition",{attrs:{name:"blur-top",duration:"300"}},[t.showFullFilters?r("div",{staticClass:"full-filters-group"},[t._l(t.availableFilters,(function(filter){return r("FilterPill",{key:filter.uid,attrs:{tag:filter.uid,icon:filter.icon,selected:t.selectedFilter,color:filter.color},on:{select:t.selectFilter}},[t._v(t._s(t.$te("filter."+filter.uid)?t.$t("filter."+filter.uid):filter.name))])})),t._v(" "),r("button",{staticClass:"close-button btn-dark",on:{click:t.toggleFullFilters}},[r("Icon",{staticClass:"icon",attrs:{icon:"times"}})],1)],2):t._e()]),t._v(" "),r("transition",{attrs:{name:"line-filters"}},[t.showLineFilters?r("div",{staticClass:"line-filters-group hide-me bg-gray-100 w-screen flex space-x-2 py-3 px-4 overflow-x-scroll",class:{hidden:t.showFullFilters}},[t._l(t.availableFilters,(function(filter){return r("FilterPill",{key:filter.uid,attrs:{tag:filter.uid,selected:t.selectedFilter,color:filter.color},on:{select:t.selectFilter}},[t._v(t._s(t.$te("filter."+filter.uid)?t.$t("filter."+filter.uid):filter.name))])})),t._v(" "),t.filters.length>6?r("div",{staticClass:"show-more",on:{click:t.toggleFullFilters}},[r("div",{staticClass:"filter-pill"},[r("Icon",{staticClass:"icon alone",attrs:{icon:"ellipsis-h"}})],1)]):t._e()],2):t._e()]),t._v(" "),r("GlobalEvents",{on:{scroll:t.debounceScroll}}),t._v(" "),r("Grid",{attrs:{id:t.selectedFilterID,uid:t.selectedFilter}}),t._v(" "),t.showOverlay?r("nuxt-child"):t._e()],1)}),[],!1,null,"aa5611e8",null);e.default=component.exports;installComponents(component,{FilterPill:r(409).default,Button:r(143).default,Grid:r(410).default})}}]);